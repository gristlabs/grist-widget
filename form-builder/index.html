<!--
  Grist Form Builder Pro Widget
  Copyright 2026 Said Hamadou
  Licensed under the Apache License, Version 2.0
  https://github.com/isaytoo/grist-form-builder-widget
-->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Builder Pro - Widget Grist</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: #f1f5f9; color: #334155; height: 100vh; overflow: hidden; }
    .app-container { display: flex; flex-direction: column; height: 100vh; }
    .header { background: white; border-bottom: 1px solid #e2e8f0; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
    .header-left { display: flex; align-items: center; gap: 15px; }
    .header h1 { font-size: 1.1em; font-weight: 600; color: #1e293b; }
    .mode-toggle { display: flex; background: #f1f5f9; border-radius: 8px; padding: 3px; }
    .mode-btn { padding: 6px 14px; border: none; background: transparent; font-size: 0.8em; font-weight: 500; color: #64748b; cursor: pointer; border-radius: 6px; transition: all 0.2s; }
    .mode-btn.active { background: white; color: #3b82f6; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .header-actions { display: flex; gap: 8px; }
    .btn { padding: 7px 14px; border: none; border-radius: 6px; font-size: 0.8em; font-weight: 500; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 5px; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-primary:hover { background: #2563eb; }
    .btn-success { background: #10b981; color: white; }
    .btn-success:hover { background: #059669; }
    .btn-secondary { background: #e2e8f0; color: #475569; }
    .btn-secondary:hover { background: #cbd5e1; }
    .btn-warning { background: #f59e0b; color: white; }
    .btn-warning:hover { background: #d97706; }
    .main-content { display: flex; flex: 1; overflow: hidden; }
    .sidebar { width: 260px; background: white; border-right: 1px solid #e2e8f0; display: flex; flex-direction: column; flex-shrink: 0; }
    .sidebar-header { padding: 12px; border-bottom: 1px solid #e2e8f0; }
    .sidebar-title { font-size: 0.75em; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
    .table-select { width: 100%; padding: 7px 10px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 0.85em; font-family: inherit; }
    .sidebar-tabs { display: flex; border-bottom: 1px solid #e2e8f0; }
    .sidebar-tab { flex: 1; padding: 10px; border: none; background: transparent; font-size: 0.8em; font-weight: 500; color: #64748b; cursor: pointer; transition: all 0.15s; }
    .sidebar-tab.active { color: #3b82f6; border-bottom: 2px solid #3b82f6; margin-bottom: -1px; }
    .sidebar-content { flex: 1; overflow-y: auto; padding: 10px; }
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }
    .field-item, .element-item { padding: 8px 10px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 5px; cursor: grab; transition: all 0.15s; display: flex; align-items: center; gap: 8px; font-size: 0.85em; }
    .field-item:hover, .element-item:hover { border-color: #3b82f6; background: #eff6ff; }
    .field-item.dragging, .element-item.dragging { opacity: 0.5; }
    .field-icon { font-size: 1em; width: 18px; text-align: center; }
    .field-name { flex: 1; font-weight: 500; color: #334155; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .field-type { font-size: 0.7em; color: #94a3b8; background: #f1f5f9; padding: 2px 5px; border-radius: 3px; }
    .elements-category { margin-bottom: 12px; }
    .elements-category-title { font-size: 0.7em; font-weight: 600; color: #94a3b8; text-transform: uppercase; margin-bottom: 6px; padding-left: 2px; }
    .workspace { flex: 1; padding: 20px; overflow: auto; display: flex; justify-content: center; background: #e2e8f0; position: relative; }
    .workspace-toolbar { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: white; border-radius: 8px; padding: 6px 10px; display: flex; gap: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 10; }
    .toolbar-btn { padding: 5px 10px; border: 1px solid #e2e8f0; background: white; border-radius: 4px; font-size: 0.8em; cursor: pointer; transition: all 0.15s; }
    .toolbar-btn:hover { background: #f1f5f9; }
    .toolbar-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
    .toolbar-separator { width: 1px; background: #e2e8f0; margin: 0 4px; }
    .page-a4 { width: 210mm; min-height: 297mm; background: white; box-shadow: 0 4px 20px rgba(0,0,0,0.15); position: relative; padding: 15mm; background-size: 20px 20px; }
    .page-a4.show-grid { background-image: linear-gradient(to right, #f1f5f9 1px, transparent 1px), linear-gradient(to bottom, #f1f5f9 1px, transparent 1px); }
    .workspace-with-rulers { position: relative; }
    .ruler { background: #f8fafc; position: absolute; z-index: 10; }
    .ruler-h { top: 0; left: 30px; right: 0; height: 20px; border-bottom: 1px solid #e2e8f0; display: none; }
    .ruler-v { top: 20px; left: 0; width: 30px; bottom: 0; border-right: 1px solid #e2e8f0; display: none; }
    .ruler.show { display: block; }
    .ruler-marks { position: relative; height: 100%; width: 100%; }
    .ruler-h .ruler-mark { position: absolute; top: 0; height: 100%; border-left: 1px solid #cbd5e1; font-size: 9px; color: #64748b; padding-left: 2px; }
    .ruler-v .ruler-mark { position: absolute; left: 0; width: 100%; border-top: 1px solid #cbd5e1; font-size: 9px; color: #64748b; writing-mode: vertical-rl; text-orientation: mixed; padding-top: 2px; }
    .ruler-corner { position: absolute; top: 0; left: 0; width: 30px; height: 20px; background: #f8fafc; border-right: 1px solid #e2e8f0; border-bottom: 1px solid #e2e8f0; z-index: 11; display: none; }
    .ruler-corner.show { display: block; }
    .workspace.with-rulers .page-a4 { margin-top: 25px; margin-left: 35px; }
    .page-a4.drag-over { outline: 2px dashed #3b82f6; outline-offset: -5px; }
    .form-field { position: absolute; background: white; border: 1px solid #e2e8f0; border-radius: 6px; padding: 10px; min-width: 180px; cursor: move; transition: box-shadow 0.15s; }
    .form-field:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .form-field.selected { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }
    .form-field-label { font-size: 0.8em; font-weight: 500; color: #475569; margin-bottom: 5px; }
    .form-field-input { width: 100%; padding: 7px 9px; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.85em; font-family: inherit; background: #f8fafc; }
    .form-field-textarea { min-height: 60px; resize: none; }
    .form-field-delete { position: absolute; top: -8px; right: -8px; width: 18px; height: 18px; background: #ef4444; color: white; border: none; border-radius: 50%; font-size: 11px; cursor: pointer; display: none; align-items: center; justify-content: center; line-height: 1; }
    .form-field:hover .form-field-delete { display: flex; }
    .form-field-resize { position: absolute; bottom: 0; right: 0; width: 12px; height: 12px; cursor: se-resize; opacity: 0; }
    .form-field:hover .form-field-resize { opacity: 1; }
    .form-field-resize::after { content: ''; position: absolute; bottom: 3px; right: 3px; width: 6px; height: 6px; border-right: 2px solid #94a3b8; border-bottom: 2px solid #94a3b8; }
    .form-section { position: absolute; background: #f8fafc; border: 2px dashed #cbd5e1; border-radius: 8px; min-width: 200px; min-height: 100px; cursor: move; }
    .form-section.selected { border-color: #3b82f6; }
    .form-section-title { padding: 8px 12px; font-size: 0.85em; font-weight: 600; color: #475569; background: white; border-bottom: 1px dashed #cbd5e1; border-radius: 6px 6px 0 0; }
    .form-section-delete { position: absolute; top: -8px; right: -8px; width: 18px; height: 18px; background: #ef4444; color: white; border: none; border-radius: 50%; font-size: 11px; cursor: pointer; display: none; align-items: center; justify-content: center; }
    .form-section:hover .form-section-delete { display: flex; }
    .form-section .form-field-resize { position: absolute; bottom: 0; right: 0; width: 12px; height: 12px; cursor: se-resize; opacity: 0; }
    .form-section:hover .form-field-resize { opacity: 1; }
    .form-section .form-field-resize::after { content: ''; position: absolute; bottom: 3px; right: 3px; width: 6px; height: 6px; border-right: 2px solid #94a3b8; border-bottom: 2px solid #94a3b8; }
    .signature-pad { border: 1px solid #e2e8f0; border-radius: 4px; background: #fafafa; height: 80px; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 0.8em; }
    .options-preview { display: flex; flex-direction: column; gap: 4px; }
    .option-item { display: flex; align-items: center; gap: 6px; font-size: 0.8em; color: #64748b; }
    .properties-panel { width: 280px; background: white; border-left: 1px solid #e2e8f0; display: flex; flex-direction: column; flex-shrink: 0; }
    .properties-header { padding: 12px 15px; border-bottom: 1px solid #e2e8f0; font-size: 0.85em; font-weight: 600; color: #1e293b; }
    .properties-content { flex: 1; overflow-y: auto; padding: 12px; }
    .property-group { margin-bottom: 14px; }
    .property-label { font-size: 0.75em; font-weight: 500; color: #64748b; margin-bottom: 4px; }
    .property-input { width: 100%; padding: 7px 9px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 0.85em; font-family: inherit; }
    .property-input:focus { outline: none; border-color: #3b82f6; }
    .property-select { width: 100%; padding: 7px 9px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 0.85em; font-family: inherit; background: white; }
    .property-checkbox { display: flex; align-items: center; gap: 8px; font-size: 0.85em; }
    .property-checkbox input { width: 16px; height: 16px; }
    .options-editor { border: 1px solid #e2e8f0; border-radius: 5px; padding: 8px; background: #f8fafc; }
    .option-row { display: flex; gap: 6px; margin-bottom: 5px; }
    .option-row input { flex: 1; padding: 5px 8px; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.8em; }
    .option-row button { padding: 5px 8px; border: none; background: #ef4444; color: white; border-radius: 4px; cursor: pointer; font-size: 0.75em; }
    .add-option-btn { width: 100%; padding: 6px; border: 1px dashed #cbd5e1; background: white; border-radius: 4px; font-size: 0.8em; color: #64748b; cursor: pointer; margin-top: 5px; }
    .add-option-btn:hover { border-color: #3b82f6; color: #3b82f6; }
    .form-view { display: none; height: 100%; overflow-y: auto; }
    .form-view.active { display: block; }
    .editor-view { display: flex; }
    .editor-view.hidden { display: none; }
    .form-container { max-width: 700px; margin: 0 auto; padding: 30px; }
    .form-canvas-view { position: relative; width: 210mm; min-height: 297mm; background: white; margin: 0 auto; padding: 15mm; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .form-field-view { position: absolute; background: white; }
    .form-field-view .form-label { margin-bottom: 4px; }
    .form-field-view .form-input, .form-field-view .form-select, .form-field-view .form-textarea-input { padding: 8px 10px; font-size: 0.9em; }
    .form-image { position: absolute; background: white; border: 1px solid #e2e8f0; border-radius: 6px; overflow: visible; cursor: move; }
    .form-image img { width: 100%; height: 100%; object-fit: contain; }
    .form-image-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #f8fafc; color: #94a3b8; font-size: 2em; }
    .form-image-delete { position: absolute; top: -8px; right: -8px; width: 18px; height: 18px; background: #ef4444; color: white; border: none; border-radius: 50%; font-size: 11px; cursor: pointer; display: none; align-items: center; justify-content: center; }
    .form-image:hover .form-image-delete { display: flex; }
    .form-image .form-field-resize { position: absolute; bottom: 0; right: 0; width: 12px; height: 12px; cursor: se-resize; opacity: 0; }
    .form-image:hover .form-field-resize { opacity: 1; }
    .form-image .form-field-resize::after { content: ''; position: absolute; bottom: 3px; right: 3px; width: 6px; height: 6px; border-right: 2px solid #94a3b8; border-bottom: 2px solid #94a3b8; }
    .form-image.selected { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }
    .form-title-element { position: absolute; background: transparent; cursor: move; font-size: 1.2em; font-weight: 600; color: #1e293b; padding: 5px; }
    .form-title-element.selected { outline: 2px solid #3b82f6; }
    .form-title-element-delete { position: absolute; top: -8px; right: -8px; width: 18px; height: 18px; background: #ef4444; color: white; border: none; border-radius: 50%; font-size: 11px; cursor: pointer; display: none; align-items: center; justify-content: center; }
    .form-title-element:hover .form-title-element-delete { display: flex; }
    .form-actions-fixed { position: sticky; bottom: 0; background: white; padding: 15px 20px; border-top: 1px solid #e2e8f0; display: flex; gap: 12px; justify-content: center; }
    .form-title { font-size: 1.3em; font-weight: 600; color: #1e293b; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
    .form-section-view { margin-bottom: 25px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0; }
    .form-section-view-title { font-size: 1em; font-weight: 600; color: #334155; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e2e8f0; }
    .form-group { margin-bottom: 18px; }
    .form-group.hidden { display: none; }
    .form-label { display: block; font-size: 0.9em; font-weight: 500; color: #475569; margin-bottom: 6px; }
    .form-label.required::after { content: ' *'; color: #ef4444; }
    .form-input, .form-select, .form-textarea-input { width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 0.95em; font-family: inherit; transition: border-color 0.15s; }
    .form-input:focus, .form-select:focus, .form-textarea-input:focus { outline: none; border-color: #3b82f6; }
    .form-textarea-input { min-height: 100px; resize: vertical; }
    .form-radio-group, .form-checkbox-group { display: flex; flex-direction: column; gap: 8px; }
    .form-radio-item, .form-checkbox-item { display: flex; align-items: center; gap: 8px; font-size: 0.9em; }
    .form-radio-item input, .form-checkbox-item input { width: 18px; height: 18px; }
    .signature-canvas-container { border: 1px solid #e2e8f0; border-radius: 6px; background: white; position: relative; }
    .signature-canvas { width: 100%; height: 120px; cursor: crosshair; }
    .signature-clear { position: absolute; top: 5px; right: 5px; padding: 4px 8px; font-size: 0.75em; background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 4px; cursor: pointer; }
    .form-actions { margin-top: 30px; display: flex; gap: 12px; }
    .form-error { color: #ef4444; font-size: 0.8em; margin-top: 4px; }
    .empty-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #94a3b8; }
    .empty-message-icon { font-size: 3em; margin-bottom: 15px; }
    .empty-message-text { font-size: 0.9em; }
    .toast { position: fixed; bottom: 20px; right: 20px; padding: 12px 20px; background: #1e293b; color: white; border-radius: 8px; font-size: 0.9em; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transform: translateY(100px); opacity: 0; transition: all 0.3s; z-index: 1000; }
    .toast.show { transform: translateY(0); opacity: 1; }
    .toast.success { background: #10b981; }
    .toast.error { background: #ef4444; }
    .loading-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center; z-index: 999; }
    .loading-overlay.hidden { display: none; }
    .loading-spinner { width: 40px; height: 40px; border: 3px solid #e2e8f0; border-top-color: #3b82f6; border-radius: 50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
    .modal-overlay.hidden { display: none; }
    .modal { background: white; border-radius: 12px; padding: 25px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; }
    .modal-title { font-size: 1.1em; font-weight: 600; margin-bottom: 20px; color: #1e293b; }
    .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
    .confirm-modal { text-align: center; }
    .confirm-modal-icon { font-size: 3em; margin-bottom: 15px; }
    .confirm-modal-title { font-size: 1.1em; font-weight: 600; color: #1e293b; margin-bottom: 10px; }
    .confirm-modal-message { font-size: 0.9em; color: #64748b; margin-bottom: 20px; }
    .confirm-modal-actions { display: flex; gap: 10px; justify-content: center; }
    .btn-cancel { background: #f1f5f9; color: #475569; }
    .btn-cancel:hover { background: #e2e8f0; }
    .btn-confirm { background: #3b82f6; color: white; }
    .btn-confirm:hover { background: #2563eb; }
    .btn-confirm.danger { background: #ef4444; }
    .btn-confirm.danger:hover { background: #dc2626; }
    .templates-list { max-height: 300px; overflow-y: auto; }
    .template-item { padding: 12px; border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.15s; }
    .template-item:hover { border-color: #3b82f6; background: #eff6ff; }
    .template-name { font-weight: 500; color: #334155; }
    .template-date { font-size: 0.8em; color: #94a3b8; margin-top: 4px; }
  </style>
</head>
<body>
<div class="app-container">
  <div class="header">
    <div class="header-left">
      <h1>üìù Form Builder Pro</h1>
      <div class="mode-toggle">
        <button class="mode-btn active" id="btn-mode-edit">‚úèÔ∏è √âdition</button>
        <button class="mode-btn" id="btn-mode-fill">üìã Saisie</button>
      </div>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary" id="btn-templates">üìÅ Templates</button>
      <button class="btn btn-warning" id="btn-export-pdf">üìÑ PDF</button>
      <button class="btn btn-secondary" id="btn-clear">üóëÔ∏è Vider</button>
      <button class="btn btn-primary" id="btn-save">üíæ Sauvegarder</button>
    </div>
  </div>
  
  <div class="main-content editor-view" id="editor-view">
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-title">Titre du formulaire</div>
        <input type="text" class="table-select" id="form-title-input" placeholder="Mon formulaire" value="">
        <div class="sidebar-title" style="margin-top: 10px;">Table source</div>
        <select class="table-select" id="table-select">
          <option value="">Chargement...</option>
        </select>
      </div>
      <div class="sidebar-tabs">
        <button class="sidebar-tab active" data-tab="fields">Champs</button>
        <button class="sidebar-tab" data-tab="elements">√âl√©ments</button>
      </div>
      <div class="sidebar-content">
        <div class="tab-panel active" id="tab-fields">
          <div id="fields-list"></div>
        </div>
        <div class="tab-panel" id="tab-elements">
          <div class="elements-category">
            <div class="elements-category-title">Champs de saisie</div>
            <div class="element-item" draggable="true" data-element-type="text"><span class="field-icon">üìù</span><span class="field-name">Texte court</span></div>
            <div class="element-item" draggable="true" data-element-type="textarea"><span class="field-icon">üìÑ</span><span class="field-name">Texte long</span></div>
            <div class="element-item" draggable="true" data-element-type="number"><span class="field-icon">üî¢</span><span class="field-name">Nombre</span></div>
            <div class="element-item" draggable="true" data-element-type="date"><span class="field-icon">üìÖ</span><span class="field-name">Date</span></div>
            <div class="element-item" draggable="true" data-element-type="email"><span class="field-icon">üìß</span><span class="field-name">Email</span></div>
            <div class="element-item" draggable="true" data-element-type="phone"><span class="field-icon">üìû</span><span class="field-name">T√©l√©phone</span></div>
          </div>
          <div class="elements-category">
            <div class="elements-category-title">Choix</div>
            <div class="element-item" draggable="true" data-element-type="select"><span class="field-icon">üìã</span><span class="field-name">Liste d√©roulante</span></div>
            <div class="element-item" draggable="true" data-element-type="radio"><span class="field-icon">üîò</span><span class="field-name">Choix unique</span></div>
            <div class="element-item" draggable="true" data-element-type="checkbox"><span class="field-icon">‚òëÔ∏è</span><span class="field-name">Cases √† cocher</span></div>
          </div>
          <div class="elements-category">
            <div class="elements-category-title">Sp√©ciaux</div>
            <div class="element-item" draggable="true" data-element-type="signature"><span class="field-icon">‚úçÔ∏è</span><span class="field-name">Signature</span></div>
            <div class="element-item" draggable="true" data-element-type="section"><span class="field-icon">üì¶</span><span class="field-name">Section</span></div>
            <div class="element-item" draggable="true" data-element-type="image"><span class="field-icon">üñºÔ∏è</span><span class="field-name">Image</span></div>
            <div class="element-item" draggable="true" data-element-type="title"><span class="field-icon">üè∑Ô∏è</span><span class="field-name">Titre/Texte</span></div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="workspace" id="workspace">
      <div class="workspace-toolbar">
        <button class="toolbar-btn" id="btn-grid" title="Grille">‚äû Grille</button>
        <button class="toolbar-btn" id="btn-snap" title="Snap">üß≤ Snap</button>
        <button class="toolbar-btn" id="btn-rulers" title="R√®gles">üìè R√®gles</button>
        <div class="toolbar-separator"></div>
        <button class="toolbar-btn" id="btn-zoom-out">‚àí</button>
        <span id="zoom-level" style="font-size: 0.8em; padding: 0 5px;">100%</span>
        <button class="toolbar-btn" id="btn-zoom-in">+</button>
      </div>
      <div class="ruler-corner" id="ruler-corner"></div>
      <div class="ruler ruler-h" id="ruler-h"><div class="ruler-marks" id="ruler-h-marks"></div></div>
      <div class="ruler ruler-v" id="ruler-v"><div class="ruler-marks" id="ruler-v-marks"></div></div>
      <div class="page-a4 show-grid" id="form-canvas">
        <div class="empty-message" id="empty-message">
          <div class="empty-message-icon">üìÑ</div>
          <div class="empty-message-text">Glissez-d√©posez des champs ici<br>pour cr√©er votre formulaire</div>
        </div>
      </div>
    </div>
    
    <div class="properties-panel" id="properties-panel">
      <div class="properties-header">Propri√©t√©s</div>
      <div class="properties-content" id="properties-content">
        <p style="color: #94a3b8; font-size: 0.85em;">S√©lectionnez un champ</p>
      </div>
    </div>
  </div>
  
  <div class="form-view" id="form-view">
    <div style="padding: 20px; background: #e2e8f0; min-height: 100%;">
      <div class="form-canvas-view" id="form-canvas-view">
        <div id="form-fields-view"></div>
      </div>
      <div class="form-actions-fixed">
        <button class="btn btn-success" id="btn-submit">‚úÖ Enregistrer</button>
        <button class="btn btn-secondary" id="btn-reset-form">‚Ü∫ R√©initialiser</button>
      </div>
    </div>
  </div>
  
  <div class="toast" id="toast"></div>
  <div class="loading-overlay" id="loading"><div class="loading-spinner"></div></div>
  
  <div class="modal-overlay hidden" id="modal-confirm">
    <div class="modal confirm-modal">
      <div class="confirm-modal-icon" id="confirm-icon">‚ö†Ô∏è</div>
      <div class="confirm-modal-title" id="confirm-title">Confirmation</div>
      <div class="confirm-modal-message" id="confirm-message">√ätes-vous s√ªr ?</div>
      <div class="confirm-modal-actions">
        <button class="btn btn-cancel" id="btn-confirm-cancel">Annuler</button>
        <button class="btn btn-confirm" id="btn-confirm-ok">Confirmer</button>
      </div>
    </div>
  </div>
  
  <div class="modal-overlay hidden" id="modal-templates">
    <div class="modal">
      <div class="modal-title">üìÅ Templates</div>
      <div class="property-group">
        <div class="property-label">Nom du template</div>
        <input type="text" class="property-input" id="template-name" placeholder="Mon formulaire">
      </div>
      <button class="btn btn-primary" id="btn-save-template" style="width: 100%; margin-bottom: 20px;">üíæ Sauvegarder</button>
      <div class="property-label">Templates enregistr√©s</div>
      <div class="templates-list" id="templates-list"><p style="color: #94a3b8; font-size: 0.85em; text-align: center; padding: 20px;">Aucun template</p></div>
      <div class="modal-actions"><button class="btn btn-secondary" id="btn-close-templates">Fermer</button></div>
    </div>
  </div>
</div>

<script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="widget.js"></script>
</body>
</html>
